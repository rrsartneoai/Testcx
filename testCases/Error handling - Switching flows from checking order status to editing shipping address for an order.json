{
  "name": "17063f1a-4eff-4b1b-aa47-8e0362919bee",
  "tags": [ "#switchflows", "#orders", "#editorder", "#orderstatus" ],
  "displayName": "Error handling - Switching flows from checking order status to editing shipping address for an order",
  "testCaseConversationTurns": [ {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "Hi can I check the status of my nest"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "has_welcomed_user": true,
        "is_returning": true,
        "operation": "Check Status",
        "operation_complete": false,
        "order_unit": [ "Nest Thermostat" ]
      },
      "triggeredIntent": {
        "name": "retail.check_order_status_initiate"
      },
      "currentPage": {
        "name": "Check Order Number",
        "flow": "Order Management Flow"
      },
      "textResponses": [ {
        "text": [ "I can help you with that. " ]
      }, {
        "text": [ "Just say the order number whenever you are ready. Feel free to type it in and press pound if thatâ€™s easier." ],
        "allowPlaybackInterruption": true
      } ],
      "currentFlow": {
        "name": "Order Management Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "Actually can I edit the shipping address for the nest i ordered"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "has_welcomed_user": true,
        "is_returning": true,
        "operation": "Edit Shipping Address",
        "operation_complete": false,
        "order_unit": "Nest Thermostat"
      },
      "triggeredIntent": {
        "name": "retail.edit_shipping_address_initiate"
      },
      "currentPage": {
        "name": "Clarify Phone Number",
        "flow": "User Verification Flow"
      },
      "textResponses": [ {
        "text": [ "Happy to assist!" ]
      }, {
        "text": [ "I'll need some account information first." ]
      }, {
        "text": [ "Is the phone number you're calling from the same one registered with your account?" ]
      } ],
      "currentFlow": {
        "name": "User Verification Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "Yes"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "has_welcomed_user": true,
        "is_returning": true,
        "operation": "Edit Shipping Address",
        "operation_complete": false,
        "order_unit": "Nest Thermostat"
      },
      "triggeredIntent": {
        "name": "small_talk.confirmation.yes"
      },
      "currentPage": {
        "name": "Request to send PIN",
        "flow": "User Verification Flow"
      },
      "textResponses": [ {
        "text": [ "Alright, I've verified your phone number." ]
      }, {
        "text": [ "I'll need to authenticate you with a PIN sent to your phone. May I send it? Standard message charges may apply." ]
      } ],
      "currentFlow": {
        "name": "User Verification Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "Yes"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "has_welcomed_user": true,
        "is_returning": true,
        "operation": "Edit Shipping Address",
        "operation_complete": false,
        "order_unit": "Nest Thermostat"
      },
      "triggeredIntent": {
        "name": "small_talk.confirmation.yes"
      },
      "currentPage": {
        "name": "Collect PIN",
        "flow": "User Verification Flow"
      },
      "textResponses": [ {
        "text": [ "I have sent a 4 digit PIN to your phone." ]
      }, {
        "text": [ "Could you please give me the PIN you received? You can say it or enter it into the keypad." ]
      } ],
      "currentFlow": {
        "name": "User Verification Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "4359"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "has_welcomed_user": true,
        "is_guest": false,
        "is_logged_in": true,
        "is_returning": true,
        "operation": "Edit Shipping Address",
        "operation_complete": false,
        "order_unit": "Nest Thermostat",
        "pin_number": "4359"
      },
      "currentPage": {
        "name": "Request User Location",
        "flow": "Address Collection Flow"
      },
      "textResponses": [ {
        "text": [ "Great! Your account has been verified." ]
      }, {
        "text": [ "The order has not shipped yet, so I can update the shipping address for you." ]
      }, {
        "text": [ "Could you please provide me with your street address? " ]
      } ],
      "currentFlow": {
        "name": "Address Collection Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "345 spear street San Francisco California"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "has_completed_one_operation": true,
        "has_welcomed_user": true,
        "is_guest": false,
        "is_logged_in": true,
        "is_returning": false,
        "location": {
          "admin-area": "California",
          "city": "San Francisco",
          "original": "345 spear street San Francisco California",
          "street-address": "345 spear street"
        },
        "operation_complete": false,
        "pin_number": "4359"
      },
      "currentPage": {
        "name": "Main Menu",
        "flow": "Default Start Flow"
      },
      "textResponses": [ {
        "text": [ "I have updated your shipping address. You should receive an email confirmation of this change. " ]
      }, {
        "text": [ "Can I help you with anything else?" ]
      } ],
      "currentFlow": {
        "name": "Default Start Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "No thank you"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "has_completed_one_operation": true,
        "has_welcomed_user": true,
        "is_guest": false,
        "is_logged_in": true,
        "is_returning": false,
        "location": {
          "admin-area": "California",
          "city": "San Francisco",
          "original": "345 spear street San Francisco California",
          "street-address": "345 spear street"
        },
        "operation_complete": false,
        "pin_number": "4359"
      },
      "triggeredIntent": {
        "name": "small_talk.confirmation.no"
      },
      "currentPage": {
        "name": "End Session",
        "flow": "Default Start Flow"
      },
      "textResponses": [ {
        "text": [ "Glad I could help! Thank you for calling. Bye!" ]
      } ],
      "currentFlow": {
        "name": "Default Start Flow"
      }
    }
  } ],
  "creationTime": {
    "seconds": 1607507686,
    "nanos": 521591000
  }
}
