{
  "name": "3ce20c9a-1765-48f6-adb1-7ba2ed2e6456",
  "tags": [ "#orders", "#orderstatus", "#cancelorder", "#switchflows" ],
  "displayName": "Error handling - Switch from cancel order to check order status during authentication",
  "notes": "Verifies that the user can successfully check the status of an order after first requesting to cancel an order. The switch occurs at the start of the authentication process, when the user is asked to verify their phone number.",
  "testCaseConversationTurns": [ {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "Hello"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "has_welcomed_user": true
      },
      "triggeredIntent": {
        "name": "Default Welcome Intent"
      },
      "currentPage": {
        "name": "Main Menu",
        "flow": "Default Start Flow"
      },
      "textResponses": [ {
        "text": [ "Hi! I'm the virtual retail agent. I can help you manage your account, check on your orders, search for stores, and purchase items. How can I assist you today?" ]
      } ],
      "currentFlow": {
        "name": "Default Start Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "Can I cancel my order"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "has_welcomed_user": true,
        "is_returning": true,
        "operation": "Cancel Order",
        "operation_complete": false
      },
      "triggeredIntent": {
        "name": "retail.cancel_order_initiate"
      },
      "currentPage": {
        "name": "Clarify Phone Number",
        "flow": "User Verification Flow"
      },
      "textResponses": [ {
        "text": [ "Happy to assist!" ]
      }, {
        "text": [ "I'll need some account information first." ]
      }, {
        "text": [ "Is the phone number on your account the same as the one you're calling in from?" ]
      } ],
      "currentFlow": {
        "name": "User Verification Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "Actually can I check the status of an order"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "has_welcomed_user": true,
        "is_returning": true,
        "operation": "Check Status",
        "operation_complete": false
      },
      "triggeredIntent": {
        "name": "retail.check_order_status_initiate"
      },
      "currentPage": {
        "name": "Check Order Number",
        "flow": "Order Management Flow"
      },
      "textResponses": [ {
        "text": [ "I can help you with that. " ]
      }, {
        "text": [ "Could you provide me with the order number, please? Alternatively, you can type it in and press pound." ],
        "allowPlaybackInterruption": true
      } ],
      "currentFlow": {
        "name": "Order Management Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "12345"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "has_completed_one_operation": true,
        "has_welcomed_user": true,
        "is_returning": false,
        "operation_complete": false
      },
      "currentPage": {
        "name": "Main Menu",
        "flow": "Default Start Flow"
      },
      "textResponses": [ {
        "text": [ "I am looking that up for you right now" ]
      }, {
        "text": [ "Looks like that order will be delivered tomorrow" ]
      }, {
        "text": [ "What else can I help you with?" ]
      } ],
      "currentFlow": {
        "name": "Default Start Flow"
      }
    }
  } ],
  "creationTime": {
    "seconds": 1607124016,
    "nanos": 742017000
  }
}
