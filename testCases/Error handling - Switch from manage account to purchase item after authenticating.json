{
  "name": "f0abfd4b-892e-4530-90ec-e6240109dff6",
  "tags": [ "#purchase", "#account", "#switchflows" ],
  "displayName": "Error handling - Switch from manage account to purchase item after authenticating",
  "testCaseConversationTurns": [ {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "Hello"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "triggeredIntent": {
        "name": "Default Welcome Intent"
      },
      "currentPage": {
        "name": "Main Menu",
        "flow": "Default Start Flow"
      },
      "textResponses": [ {
        "text": [ "Good day! What can I do for you today?" ]
      } ],
      "currentFlow": {
        "name": "Default Start Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "Manage my account"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "allow_guest_login": false,
        "is_returning": true,
        "operation": "Manage Account"
      },
      "triggeredIntent": {
        "name": "retail.manage_account_initiate"
      },
      "currentPage": {
        "name": "Clarify Phone Number",
        "flow": "User Verification Flow"
      },
      "textResponses": [ {
        "text": [ "I'll need some account information first." ]
      }, {
        "text": [ "Is the phone number on your account the same as the one you're calling in from?" ]
      } ],
      "currentFlow": {
        "name": "User Verification Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "Yes"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "allow_guest_login": false,
        "is_returning": true,
        "operation": "Manage Account"
      },
      "triggeredIntent": {
        "name": "small_talk.confirmation.yes"
      },
      "currentPage": {
        "name": "Request to send PIN",
        "flow": "User Verification Flow"
      },
      "textResponses": [ {
        "text": [ "Okay, your phone number has been verified." ]
      }, {
        "text": [ "I'll need to authenticate you. Can I send a PIN to your phone?" ]
      } ],
      "currentFlow": {
        "name": "User Verification Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "Yes"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "allow_guest_login": false,
        "is_returning": true,
        "operation": "Manage Account"
      },
      "triggeredIntent": {
        "name": "small_talk.confirmation.yes"
      },
      "currentPage": {
        "name": "Collect PIN",
        "flow": "User Verification Flow"
      },
      "textResponses": [ {
        "text": [ "I have sent a 4 digit PIN to your phone." ]
      }, {
        "text": [ "Could you please give me the PIN you received? You can say it or enter it into the keypad." ]
      } ],
      "currentFlow": {
        "name": "User Verification Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "1234"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "is_guest": false,
        "is_logged_in": true,
        "is_returning": true,
        "operation": "Manage Account"
      },
      "currentPage": {
        "name": "Manage Account",
        "flow": "Account Management Flow"
      },
      "textResponses": [ {
        "text": [ "Thanks! I've verified your account." ]
      }, {
        "text": [ "I'm ready to help you with your account. What do you need?" ]
      } ],
      "currentFlow": {
        "name": "Account Management Flow"
      }
    }
  }, {
    "userInput": {
      "isWebhookEnabled": true,
      "input": {
        "text": {
          "text": "Can I buy something"
        },
        "languageCode": "en"
      }
    },
    "virtualAgentOutput": {
      "sessionParameters": {
        "is_guest": false,
        "is_logged_in": true,
        "is_returning": true,
        "operation": "Manage Account"
      },
      "triggeredIntent": {
        "name": "retail.purchase_item_initiate"
      },
      "currentPage": {
        "name": "Add to Cart",
        "flow": "Purchase Item Flow"
      },
      "textResponses": [ {
        "text": [ "I can definitely help with that." ]
      }, {
        "text": [ "What would you like to order?" ]
      } ],
      "currentFlow": {
        "name": "Purchase Item Flow"
      }
    }
  } ],
  "creationTime": {
    "seconds": 1605807219,
    "nanos": 835490000
  }
}
